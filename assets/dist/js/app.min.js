/*!
 * Screen Reader Check Theme Version 1.0.0 (https://screen-reader-check.felix-arntz.me)
 * Licensed under GNU General Public License v3 (http://www.gnu.org/licenses/gpl-3.0.html)
 */
!function(e,t,a){return"undefined"==typeof e.name?void console.error("Missing WP theme object. Aborting..."):(t.extend(e,{init:function(){e.settings.init_tooltips&&t.fn.tooltip&&e.apply('[rel="tooltip"]',function(e){e.tooltip()}),e.settings.init_popovers&&t.fn.popover&&e.apply('[rel="popover"]',function(e){e.popover()}),e.settings.init_fancybox&&t.fn.fancybox&&e.apply('a[href$=".jpg"],a[href$=".jpeg"],a[href$=".png"],a[href$=".gif"]',function(e){e.each(function(){var e=t(this),a=e.parents(".gallery");0<a.length&&e.attr("rel",a.attr("id"))}).fancybox({type:"image",maxWidth:"90%",maxHeight:"90%",openEffect:"elastic",closeEffect:"elastic",nextEffect:"elastic",prevEffect:"elastic"})}),e.settings.wrap_embeds&&e.apply('iframe, embed, object, [class*="embed-responsive-item"]',function(e){e.each(function(){var e=t(this);if(!e.data("nowrap")){var a=e.data("ratio");if(a=a?a.split(":"):[e.width(),e.height()],2===a.length){var r=100*(a[1]/(1*a[0])),n=t('<div class="embed-responsive"></div>');n.css({"padding-bottom":""+r+"%"}),e.wrap(n).parent().parent().is("p")&&e.parent().unwrap()}}})});var a=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,r=navigator.userAgent.toLowerCase().indexOf("opera")>-1,n=navigator.userAgent.toLowerCase().indexOf("msie")>-1;(a||r||n)&&document.getElementById&&window.addEventListener&&window.addEventListener("hashchange",function(){var e,t=location.hash.substring(1);/^[A-z0-9_-]+$/.test(t)&&(e=document.getElementById(t),e&&(/^(?:a|select|input|button|textarea)$/i.test(e.tagName)||(e.tabIndex=-1),e.focus()))},!1),t("#screen-reader-check-form").length&&(window.screenReaderCheck?e.init_checker():console.error(e.i18n.plugin_missing))},init_checker:function(){var a=!1;t("#toggle-main-input").on("click",function(e){if(e.preventDefault(),!a){var r=t(this);a=!0;var n=r.data("target"),s=r.data("hide"),i=r.data("text"),o=r.text();t(n).find(".form-control").prop("required",!0).attr("aria-required","true").prop("disabled",!1).attr("aria-disabled","false"),t(s).find(".form-control").prop("required",!1).attr("aria-required","false").prop("disabled",!0).attr("aria-disabled","true"),t(s).fadeOut(400,function(){r.text(i).data("text",o).data("target",s).data("hide",n),t(n).fadeIn(400,function(){a=!1})})}});var r=!1;t("#screen-reader-check-form").on("submit",function(a){function n(e){e||(t("#url").val(""),t("#html").val(""),t("#advanced-options-content .form-control").val("")),t("#results-loader").fadeOut(400),r=!1,i.prop("disabled",!1).attr("aria-disabled","false")}if(a.preventDefault(),!r){e.remove_error();var s=t(this),i=t("#screen-reader-check-form-submit");r=!0;var o=e.get_form_values(s);i.prop("disabled",!0).attr("aria-disabled","true"),t("#results-loader").fadeIn(400),window.screenReaderCheck.createCheck(o).done(function(t){e.run_tests(t.id,n)}).fail(function(t){e.handle_error(t,n)})}})},run_tests:function(t,a){function r(n){n||(n={}),window.screenReaderCheck.runNextTest(t,n).done(function(t){t.check_complete?e.handle_test_result(t,a):e.handle_test_result(t,r)}).fail(function(t){e.handle_error(t,a)})}r()},handle_test_result:function(a,r){var n=!0,s="error"===a.type?"danger":a.type,i=t("#test_"+a.test_slug);i.length||(n=!1,i=t('<li id="test_'+a.test_slug+'"></li>')),i.hasClass("result-"+s)||i.attr("class","result result-"+s);var o=t('<div class="result-inner"></div>');o.append("<h4>"+a.test_title+"</h4>");var d="";if(a.test_guideline_title.length&&a.test_guideline_anchor.length&&(d+="<strong>"+e.i18n.wcag_guideline+':</strong> <a href="https://www.w3.org/TR/WCAG20/#'+a.test_guideline_anchor+'" target="_blank">'+a.test_guideline_title+"</a>",a.test_links.length&&(d+=" | ")),a.test_links.length){d+="<strong>"+e.i18n.further_reading+":</strong>";for(var l in a.test_links)d+=' <a href="'+a.test_links[l].target+'" target="_blank">'+a.test_links[l].title+"</a>"}d.length&&o.append('<p class="text-lg-right"><small>'+d+"</small></p>"),a.test_description&&a.test_description.length&&(o.append("<h5>"+e.i18n.test_description+"</h5>"),o.append("<p>"+a.test_description+"</p>"),o.append("<h5>"+e.i18n.test_results+"</h5>"));for(var l in a.messages)o.append("<p>"+a.messages[l]+"</p>");var u=[];for(var l in a.request_data)if(!a.request_data[l].value||"string"==typeof a.request_data[l].value&&!a.request_data[l].value.length){var p=t('<div class="form-group"></div>');if(p.append('<label for="test_'+a.test_slug+"-"+a.request_data[l].slug+'">'+a.request_data[l].label+"</label>"),"select"===a.request_data[l].type){var c=t('<select id="test_'+a.test_slug+"-"+a.request_data[l].slug+'" name="'+a.request_data[l].slug+'" class="form-control" aria-describedby="test_'+a.test_slug+"-"+a.request_data[l].slug+'_description" aria-required="true" required></select>');if(a.request_data[l].options&&a.request_data[l].options.length)for(var f in a.request_data[l].options)c.append('<option value="'+a.request_data[l].options[f].value+'"'+(a.request_data[l].options[f].value===a.request_data[l]["default"]?" selected":"")+">"+a.request_data[l].options[f].label+"</option>");p.append(c)}else p.append('<input type="'+a.request_data[l].type+'" id="test_'+a.test_slug+"-"+a.request_data[l].slug+'" name="'+a.request_data[l].slug+'" value="'+a.request_data[l]["default"]+'" class="form-control" aria-describedby="test_'+a.test_slug+"-"+a.request_data[l].slug+'_description" aria-required="true" required>');p.append('<p id="test_'+a.test_slug+"-"+a.request_data[l].slug+'_description" class="form-text text-muted">'+a.request_data[l].description+"</p>"),u.push(p)}if(u.length){for(var _=parseInt(Math.ceil(u.length/2),10),g=t('<form method="post" novalidate"></form>'),h=t('<div class="row"></div>'),v=t('<div class="col-md-6"></div>'),m=t('<div class="col-md-6"></div>'),l=0;l<_;)v.append(u[l]),l++;for(;l<u.length;)m.append(u[l]),l++;h.append(v),h.append(m),g.append("<p><strong>"+e.i18n.action_required+"</strong><br>"+e.i18n.action_required_description+"</p>"),g.append(h),g.append('<div class="result-submit-wrap"><button type="submit" class="btn btn-primary">'+e.i18n.submit+"</button></div>"),o.append(g),t("#results-loader").fadeOut(400),g.on("submit",function(a){a.preventDefault(),g.find(".result-submit-wrap > button").prop("disabled",!0).attr("aria-disabled","true"),t("#results-loader").fadeIn(400),r(e.get_form_values(g))})}n?i.html(o):(i.append(o),t("#results-log").append(i)),u.length||r()},handle_error:function(a,r){var n=t("#screen-reader-check-error");n.length?n.find("p").html(a):(n=t('<div id="screen-reader-check-error" class="alert alert-danger alert-dismissible fade" role="alert"><button type="button" class="close" data-dismiss="alert" aria-label="'+e.i18n.close+'"><span aria-hidden="true">&times;</span></button><h4 class="alert-heading">'+e.i18n.an_error_occurred+"</h4><p>"+a+"</p></div>"),t("#screen-reader-check-form").append(n),n.addClass("in")),r(!0)},remove_error:function(){var e=t("#screen-reader-check-error");e.length&&e.remove()},get_form_values:function(e){var t=e.serializeArray(),a={};for(var r in t)if(t[r].name.search(/\[/g)>=0){var n=t[r].name.replace("]","").split("[");a[n[0]]||(a[n[0]]={}),a[n[0]][n[1]]=t[r].value}else a[t[r].name]=t[r].value;return a},apply:function(e,a){a(t(e)),t(document).on("wp_theme.insert_content",function(r,n){"undefined"!=typeof n&&a(t(n).find(e))})},insert:function(e){t(document).trigger("wp_theme.insert_content",[e])}}),void e.init())}(window.wp_theme||{},jQuery,wp);